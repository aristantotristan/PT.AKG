<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Paraf Checklist Harian</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  padding: 20px;
}
h2 {
  text-align: center;
}
fieldset {
  background: #fff;
  border-radius: 8px;
  border: 1px solid #ccc;
  padding: 16px;
  margin-bottom: 20px;
}
legend {
  font-weight: bold;
}
canvas {
  width: 100%;
  height: 150px;
  border: 2px dashed #999;
  border-radius: 6px;
  touch-action: none;
}
.tools {
  display: flex;
  gap: 10px;
  margin-top: 8px;
}
button {
  flex: 1;
  padding: 10px;
  background: #003366;
  color: #fff;
  border: none;
  border-radius: 6px;
}
button.clear {
  background: #999;
}
</style>
</head>

<body>

<h2>Paraf Checklist Harian<br>Stand Label & Robot</h2>

<fieldset>
<legend>Paraf Pelaksana / User</legend>

<label>Nama</label>
<input type="text" id="p1_name">

<label>Tanggal</label>
<input type="text" id="p1_date" readonly>

<canvas id="sigCanvas"></canvas>

<div class="tools">
  <button class="clear" onclick="clearCanvas()">Hapus</button>
  <button onclick="saveSignature()">Setujui</button>
</div>
</fieldset>

<script>
const canvas = document.getElementById("sigCanvas");
const ctx = canvas.getContext("2d");

canvas.width = canvas.offsetWidth;
canvas.height = canvas.offsetHeight;

let drawing = false;

function getPos(e) {
  if (e.touches) {
    return {
      x: e.touches[0].clientX - canvas.getBoundingClientRect().left,
      y: e.touches[0].clientY - canvas.getBoundingClientRect().top
    };
  }
  return {
    x: e.offsetX,
    y: e.offsetY
  };
}

canvas.addEventListener("mousedown", () => drawing = true);
canvas.addEventListener("mouseup", () => drawing = false);
canvas.addEventListener("mouseleave", () => drawing = false);
canvas.addEventListener("mousemove", draw);

canvas.addEventListener("touchstart", () => drawing = true);
canvas.addEventListener("touchend", () => drawing = false);
canvas.addEventListener("touchmove", draw);

function draw(e) {
  if (!drawing) return;
  const pos = getPos(e);
  ctx.lineWidth = 2;
  ctx.lineCap = "round";
  ctx.strokeStyle = "#000";
  ctx.lineTo(pos.x, pos.y);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(pos.x, pos.y);
}

function clearCanvas() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
}

function saveSignature() {
  const img = canvas.toDataURL("image/png");
  console.log("TTD BASE64:", img);
  alert("TTD siap disimpan (next step upload)");
}

document.getElementById("p1_date").value =
  new Date().toLocaleDateString("id-ID");
</script>

</body>
</html>
